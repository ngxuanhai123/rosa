<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Daily Holy Rosary</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚úùÔ∏è</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    
    <style>
        /* GI·ªÆ NGUY√äN CSS C≈® */
        :root {
            --primary-color: #0f172a;
            --accent-gold: #fbbf24;
            --card-bg: rgba(20, 30, 48, 0.85);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(rgba(15, 23, 42, 0.8), rgba(15, 23, 42, 0.9)),
                url('https://images.unsplash.com/photo-1437603568260-1950d3ca6eab?q=80&w=1920&auto=format&fit=crop'); 
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            margin: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--text-main);
            overflow: hidden;
        }

        .main-container {
            width: 100%;
            max-width: 400px;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .glass-card {
            background: var(--card-bg);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 30px 24px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            text-align: center;
            position: relative;
            overflow: hidden;
            animation: fadeInUp 1s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .glass-card::before {
            content: "‚Ä†";
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 15rem;
            color: rgba(255, 255, 255, 0.03);
            font-family: 'Cinzel', serif;
            pointer-events: none;
        }

        .header-icon {
            font-size: 2rem;
            color: var(--accent-gold);
            margin-bottom: 10px;
            text-shadow: 0 0 15px rgba(251, 191, 36, 0.4);
        }

        .date-text {
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--accent-gold);
            font-weight: 600;
            margin-bottom: 20px;
            opacity: 0.9;
        }

        .lang-group {
            display: inline-flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 25px;
            background: rgba(0,0,0,0.2);
            padding: 4px;
            border-radius: 12px;
        }

        .lang-btn {
            background: transparent;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .lang-btn span {
            font-size: 0.8rem;
            font-weight: 500;
            font-family: 'Inter', sans-serif;
        }

        .lang-btn.active {
            background: rgba(255,255,255,0.1);
            color: var(--text-main);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .mystery-visual {
            width: 100%;
            height: 220px;
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 24px;
            border: 1px solid var(--glass-border);
            position: relative;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
            background: #000;
        }

        .mystery-visual img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
            opacity: 0;
            animation: fadeInImg 1s forwards;
        }
        
        @keyframes fadeInImg { to { opacity: 1; } }

        .mystery-title {
            font-family: 'Cinzel', serif;
            font-size: 1.6rem;
            font-weight: 700;
            margin: 0 0 5px 0;
            background: linear-gradient(to right, #fff, #cbd5e1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .mystery-subtitle {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 30px;
            font-weight: 300;
        }

        audio {
            width: 100%;
            height: 45px;
            border-radius: 10px;
            filter: invert(1) hue-rotate(180deg);
            opacity: 0.8;
            outline: none;
        }

        .footer-text {
            margin-top: 30px;
            font-size: 0.7rem;
            color: rgba(255,255,255,0.2);
            font-family: 'Cinzel', serif;
            letter-spacing: 1px;
        }

        #start-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(5px);
            z-index: 999;
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            cursor: pointer;
        }
        
        .play-btn-big {
            width: 80px; height: 80px;
            border-radius: 50%;
            background: var(--accent-gold);
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 0 30px rgba(251, 191, 36, 0.4);
            animation: pulse 2s infinite;
        }
        
        .play-btn-big::after {
            content: "‚ñ∂";
            color: #000;
            font-size: 30px;
            margin-left: 5px;
        }
        
        .overlay-text {
            margin-top: 20px;
            color: white;
            font-family: 'Cinzel', serif;
            letter-spacing: 1px;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(251, 191, 36, 0.7); }
            70% { transform: scale(1.1); box-shadow: 0 0 0 20px rgba(251, 191, 36, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(251, 191, 36, 0); }
        }
    </style>
</head>
<body>

    <div id="start-overlay" onclick="unlockAudio()">
        <div class="play-btn-big"></div>
        <div class="overlay-text" id="overlay-msg">Ch·∫°m ƒë·ªÉ b·∫Øt ƒë·∫ßu c·∫ßu nguy·ªán</div>
    </div>

    <div class="main-container">
        <div class="glass-card">
            <div class="header-icon">‚ò©</div>
            <div class="date-text" id="date-display">LOADING...</div>

            <div class="lang-group">
                <button onclick="changeLanguage('vi')" id="btn-vi" class="lang-btn active">
                    üáªüá≥ <span>Vi·ªát</span>
                </button>
                <button onclick="changeLanguage('en')" id="btn-en" class="lang-btn">
                    üá∫üá∏ <span>Eng</span>
                </button>
                <button onclick="changeLanguage('id')" id="btn-id" class="lang-btn">
                    üáÆüá© <span>Indo</span>
                </button>
            </div>

            <div class="mystery-visual">
                <img id="mystery-img" src="" alt="Mystery">
            </div>

            <h1 class="mystery-title" id="mystery-name">...</h1>
            <p class="mystery-subtitle" id="sub-text">Connecting...</p>

            <div class="audio-container">
                <audio id="audio-player" controls controlsList="nodownload" playsinline>
                    <source src="" id="audio-source"> Your browser does not support audio.
                </audio>
            </div>

            <div class="footer-text">AD MAJOREM DEI GLORIAM</div>
        </div>
    </div>

   <script>
        // ============================================================
        // 1. C·∫§U H√åNH LINK AUDIO (B·∫†N D√ÅN LINK C·ª¶A M√åNH V√ÄO ƒê√ÇY)
        // ============================================================
        
        // Link m·∫´u b·∫°n ƒë√£ g·ª≠i cho M√πa M·ª´ng (Glorious)
        const LINK_MUNG_VN = "";
        const LINK_VUI_VN   = ""; // V√≠ d·ª•: "https://.../Vui.m4a"
        const LINK_THUONG_VN = ""; // V√≠ d·ª•: "https://.../Thuong.m4a"
        const LINK_SANG_VN  = ""; // V√≠ d·ª•: "https://.../Sang.m4a"

        // Link ti·∫øng Anh (n·∫øu c√≥)
        const LINK_JOYFUL_EN    = "https://pub-68349844dd6d4ec5a3103816b64fec7a.r2.dev/Joyful%20Mysteries%20-%20Vui.m4a";
        const LINK_SORROWFUL_EN = "https://pub-68349844dd6d4ec5a3103816b64fec7a.r2.dev/Sorrowful%20Mysteries%20-%20Th%C6%B0%C6%A1ng.m4a";
        const LINK_GLORIOUS_EN  = "https://pub-68349844dd6d4ec5a3103816b64fec7a.r2.dev/Glorious%20Mysteries%20-%20%20M%E1%BB%ABng.m4a";
        const LINK_LUMINOUS_EN  = "https://pub-68349844dd6d4ec5a3103816b64fec7a.r2.dev/Luminous%20Mysteries%20-%20S%C3%A1ng.m4a";

        // Link ti·∫øng Indo (n·∫øu c√≥)
        const LINK_JOYFUL_ID    = "https://pub-68349844dd6d4ec5a3103816b64fec7a.r2.dev/DOA%20ROSARIO%20Peristiwa%20Gembira%20(%20Hari%20Senin%20%26%20Sabtu%20).m4a";
        const LINK_SORROWFUL_ID = "https://pub-68349844dd6d4ec5a3103816b64fec7a.r2.dev/DOA%20ROSARIO%20Peristiwa%20Sedih%20(%20Hari%20Selasa%20%26%20Jumat%20).m4a";
        const LINK_GLORIOUS_ID  = "https://pub-68349844dd6d4ec5a3103816b64fec7a.r2.dev/DOA%20ROSARIO%20Peristiwa%20Mulia%20(%20Hari%20Rabu%20%26%20Minggu%20).m4a";
        const LINK_LUMINOUS_ID  = "https://pub-68349844dd6d4ec5a3103816b64fec7a.r2.dev/DOA%20ROSARIO%20Peristiwa%20Terang%20(%20Hari%20Kamis%20).m4a";


        // ============================================================
        // 2. D·ªÆ LI·ªÜU C·ªê ƒê·ªäNH (KH√îNG C·∫¶N CH·ªàNH S·ª¨A)
        // ============================================================
        
        const IMAGES = {
            joyful: "https://images.unsplash.com/photo-1544131807-688755b6a715?q=80&w=600&auto=format&fit=crop",
            sorrowful: "https://images.unsplash.com/photo-1563220815-515437887515?q=80&w=600&auto=format&fit=crop",
            glorious: "https://images.unsplash.com/photo-1437603568260-1950d3ca6eab?q=80&w=600&auto=format&fit=crop",
            luminous: "https://images.unsplash.com/photo-1507646870344-325b3c224209?q=80&w=600&auto=format&fit=crop"
        };

        const TEXT_DATA = {
            vi: {
                joyful: { name: "NƒÉm S·ª± Vui", sub: "Th·ª© Hai & Th·ª© B·∫£y", url: LINK_VUI_VN },
                sorrowful: { name: "NƒÉm S·ª± Th∆∞∆°ng", sub: "Th·ª© Ba & Th·ª© S√°u", url: LINK_THUONG_VN },
                glorious: { name: "NƒÉm S·ª± M·ª´ng", sub: "Th·ª© T∆∞ & Ch√∫a Nh·∫≠t", url: LINK_MUNG_VN },
                luminous: { name: "NƒÉm S·ª± S√°ng", sub: "Th·ª© NƒÉm", url: LINK_SANG_VN },
                overlay: "Ch·∫°m ƒë·ªÉ b·∫Øt ƒë·∫ßu c·∫ßu nguy·ªán"
            },
            en: {
                joyful: { name: "Joyful Mysteries", sub: "Mon & Sat", url: LINK_JOYFUL_EN },
                sorrowful: { name: "Sorrowful Mysteries", sub: "Tue & Fri", url: LINK_SORROWFUL_EN },
                glorious: { name: "Glorious Mysteries", sub: "Wed & Sun", url: LINK_GLORIOUS_EN },
                luminous: { name: "Luminous Mysteries", sub: "Thursday", url: LINK_LUMINOUS_EN },
                overlay: "Tap to start praying"
            },
            id: {
                joyful: { name: "Peristiwa Gembira", sub: "Senin & Sabtu", url: LINK_JOYFUL_ID },
                sorrowful: { name: "Peristiwa Sedih", sub: "Selasa & Jumat", url: LINK_SORROWFUL_ID },
                glorious: { name: "Peristiwa Mulia", sub: "Rabu & Minggu", url: LINK_GLORIOUS_ID },
                luminous: { name: "Peristiwa Terang", sub: "Kamis", url: LINK_LUMINOUS_ID },
                overlay: "Ketuk untuk berdoa"
            }
        };

        // ============================================================
        // 3. LOGIC X·ª¨ L√ù
        // ============================================================

        let currentLang = localStorage.getItem('rosary_lang') || 'vi';
        const audioPlayer = document.getElementById('audio-player');

        // H√†m x√°c ƒë·ªãnh M√πa d·ª±a tr√™n th·ª© trong tu·∫ßn
        function getMysteryCode() {
            // 0 = Sunday, 1 = Monday, ... 6 = Saturday
            const day = new Date().getDay();
            
            switch(day) {
                case 1: return 'joyful';    // Th·ª© 2
                case 6: return 'joyful';    // Th·ª© 7
                case 2: return 'sorrowful'; // Th·ª© 3
                case 5: return 'sorrowful'; // Th·ª© 6
                case 4: return 'luminous';  // Th·ª© 5
                case 0: return 'glorious';  // CN
                case 3: return 'glorious';  // Th·ª© 4
                default: return 'joyful';
            }
        }

        function updateUI(shouldPlay = false) {
            document.getElementById('mystery-name').style.opacity = '0.5';

            try {
                // 1. X√°c ƒë·ªãnh d·ªØ li·ªáu c·∫ßn l·∫•y
                const mysteryCode = getMysteryCode();
                const data = TEXT_DATA[currentLang][mysteryCode];
                const overlayText = TEXT_DATA[currentLang].overlay;

                // 2. C·∫≠p nh·∫≠t Text
                document.getElementById('mystery-name').textContent = data.name;
                document.getElementById('sub-text').textContent = data.sub;
                document.getElementById('mystery-name').style.opacity = '1';
                document.getElementById('overlay-msg').textContent = overlayText;

                // 3. C·∫≠p nh·∫≠t ·∫¢nh
                document.getElementById('mystery-img').src = IMAGES[mysteryCode];

                // 4. C·∫≠p nh·∫≠t Ng√†y
                const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                const localeMap = { vi: 'vi-VN', en: 'en-US', id: 'id-ID' };
                document.getElementById('date-display').textContent = new Date().toLocaleDateString(localeMap[currentLang], dateOptions);

                // 5. C·∫≠p nh·∫≠t Audio
                // N·∫øu ch∆∞a c√≥ link (chu·ªói r·ªóng), b√°o l·ªói nh·∫π
                if (!data.url) {
                    console.warn("Ch∆∞a c√≥ link audio cho m·ª•c n√†y!");
                }

                if (audioPlayer.src !== data.url && data.url) {
                    console.log("Loading Audio:", data.url);
                    audioPlayer.src = data.url;
                    audioPlayer.load();
                    if (shouldPlay) attemptAutoplay();
                } else if (shouldPlay && audioPlayer.paused && data.url) {
                    attemptAutoplay();
                }

                // 6. Active Button
                document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
                document.getElementById(`btn-${currentLang}`).classList.add('active');

            } catch (error) {
                console.error("L·ªói:", error);
                document.getElementById('mystery-name').textContent = "Error Loading Data";
            }
        }

        function attemptAutoplay() {
            var promise = audioPlayer.play();
            if (promise !== undefined) {
                promise.then(_ => {
                    document.getElementById('start-overlay').style.display = 'none';
                }).catch(error => {
                    console.log("Autoplay prevented. Waiting for user interaction.");
                    document.getElementById('start-overlay').style.display = 'flex';
                });
            }
        }

        function unlockAudio() {
            document.getElementById('start-overlay').style.display = 'none';
            const audioSource = audioPlayer.src;
            if(audioSource && audioSource !== window.location.href) {
                 audioPlayer.play();
            }
        }

        function changeLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('rosary_lang', lang);
            updateUI(true);
        }

        document.addEventListener('DOMContentLoaded', () => {
            updateUI(false);
        });
    </script>
</body>
</html>
